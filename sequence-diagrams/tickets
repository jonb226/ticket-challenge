@startuml
App -> TicketService: findAndHoldSeats(int numSeats, Email)
TicketService -> SeatRepository: findAndHoldBestSeats(int numSeats)
SeatRepository --> TicketService: Collection<Seat>
TicketService -> SeatHoldRepository: insert(Email, SeatHold)
TicketService --> App: SeatHold
TicketService -> TicketService: removeExpiredHolds()
TicketService -> SeatHoldRepository: getExpiredHolds()
SeatHoldRepository --> TicketService: Collection<SeatHold>
TicketService -> SeatRepository: removeHold(Collection<Seat>)
TicketService -> SeatHoldRepository: delete(SeatHoldId)
App -> TicketService: numSeatsAvailable()
TicketService -> SeatRepository: numSeatsAvailable()
SeatRepository --> TicketService: Collection<Seat>
TicketService --> App: int
App -> TicketService: reserveSeats(int seatHoldId, String email)
TicketService -> SeatHoldRepository: removeExpiration(SeatHoldId)
@enduml
